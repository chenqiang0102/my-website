<html>
<head>
<meta charset="UTF-8">
<title>跳转</title>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  

</head>
<body>
    <a href="https://mp.weixin.qq.com/s/lnEmt6J4hFjDvWAHpzjCMw" >阅读</a>
 
	<link href="https://cdn.bootcss.com/jquery-toast-plugin/1.3.2/jquery.toast.css" rel="stylesheet">

	<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>

	<script src="https://cdn.bootcss.com/jquery-toast-plugin/1.3.2/jquery.toast.min.js"></script>
<script>

  
  
        function pushHistory() { 
		  	$.toast("开始自动点阅");
			var state = { 
			title: "title", 
			url: "a.html"
			}; 
			
			sessionStorage.setItem('is_reload_ym', true);
			window.history.pushState(state, "title", "a.html"); 
			
				$.toast(window.history.length);
			} 
	
	
	
 
var second =3;
 
jQuery(function($) {

setInterval("redirect()", 1000); 
 
});

 
 
function redirect(){ 
 
 second--;
if(second==0) {

       pushHistory();
        
   // $("a")[0].click();
   
     setTimeout(function () {
								 window.location.href = "https://mp.weixin.qq.com/s/lnEmt6J4hFjDvWAHpzjCMw?scene=4#wechat_redirect";
							}, 1500);
   
  
	}
	
 
   
 /// window.location.href="https://mp.weixin.qq.com/s/lnEmt6J4hFjDvWAHpzjCMw" ; 
 // alert(second);
} 


		componentDidMount(){
		//浏览器监听页面显示，隐藏
			let that = this;
			document.addEventListener("visibilitychange",()=>{
			if(document.visibilityState =='visible') {
			   that.showPage();
			}
			if(document.visibilityState=='hidden'){
			  that.hidePage();
		  }
		})
		}
		 
 
	 showPage = ()=>{
		   alert(2222);
	 } 
 
 
</script>

